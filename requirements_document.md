# 3軸ロボットモーション作成ツール 要件定義書

## 1. 概要

本ツールは、3軸ロボットの各関節角度の時間変化をGUI上で直感的に作成・編集し、指定されたインターバルでサンプリングしたデータをCSV形式で出力できるモーション編集ツールである。3Dプレビュー機能と再生機能を備え、ユーザーが作成したモーションをその場で視覚的に確認できる。

---

## 2. 対象環境

* OS: Ubuntu 22.04
* 開発技術: 任意（Python, Rust, Webアプリなど）
* 実行形態: デスクトップアプリ または Webアプリ（ローカル実行可能）

---

## 3. ロボット仕様

* 対象軸: J1 (Yaw), J2 (Roll), J3 (Pitch)
* 各軸の初期角度範囲: ±90°（-π/2 − +π/2）
* 範囲はGUI上で軸ごとに編集可能

---

## 4. 機能要件

### 4.1 グラフベースのモーション編集

* 各軸ごとにグラフを分離し、縦方向に並列表示
* 横軸: 時間 (ms)、縦軸: 角度 (rad)
* 操作:

  * ドラッグ: 点の移動
  * ダブルクリック: 点の追加
  * 右クリック: 点の削除
  * 数値入力欄: 選択点の角度を直接入力
* 補間方法: Catmull-Rom スプライン補間（通過型）
* Snap機能（時間グリッド吸着）のON/OFF

### 4.2 出力機能

* CSVファイル形式
* 出力例:

  ```
  time(ms), J1(rad), J2(rad), J3(rad)
  0, 0.0, 0.0, 0.0
  20, 0.01, 0.02, -0.01
  ```
* 出力間隔: 20ms固定
* 出力時間範囲: 編集画面で指定

### 4.3 3Dプレビュー

* 外部モデルを1剛体として読み込み、J1 → J2 → J3の順で姿勢に反映
* 対応形式: .gltf / .glb
* 操作: マウスで視点回転・ズーム
* リアルタイムで現在時刻の姿勢を表示

### 4.4 タイムライン再生

* 再生 / 停止 / 巻き戻し / シークバー
* 再生速度調整（0.5x \~ 2.0x）

### 4.5 プロジェクト保存・読み込み

* 保存形式: JSON または YAML
* 保存内容: 各軸のポイント情報、角度範囲、補間設定など

### 4.6 操作ショートカット

* Ctrl+Z / Ctrl+Y: Undo / Redo
* Ctrl+S: 保存
* Delete: 選択点削除
* Space: 再生 / 停止

---

## 5. 将来的な拡張

* ZeroMQを用いたモーションデータのストリーミング送信機能

  * 現段階では未実装、拡張性を確保した設計とする

---

## 6. 非機能要件

* UIは直感的かつ視認性に優れた設計
* 軸ごとの色分け表示

  * J1: 青
  * J2: 緑
  * J3: 赤
* 全体で軽快なレスポンスを維持

---

## 7. 補足資料

* UIモックアップ参照（app_image.png）
* 3Dモデルはユーザーが準備し、ファイル選択で読み込む
